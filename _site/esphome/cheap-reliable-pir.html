<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>ESPHome PIR HC SR501 - Home Automation India</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>ESPHome PIR HC SR501 | Home Automation India</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="ESPHome PIR HC SR501" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A Community driven site to host various documentaion contributed by community members to help users get started with Home Automation and related services." /> <meta property="og:description" content="A Community driven site to host various documentaion contributed by community members to help users get started with Home Automation and related services." /> <link rel="canonical" href="http://localhost:4000/esphome/cheap-reliable-pir.html" /> <meta property="og:url" content="http://localhost:4000/esphome/cheap-reliable-pir.html" /> <meta property="og:site_name" content="Home Automation India" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="ESPHome PIR HC SR501" /> <script type="application/ld+json"> {"description":"A Community driven site to host various documentaion contributed by community members to help users get started with Home Automation and related services.","headline":"ESPHome PIR HC SR501","url":"http://localhost:4000/esphome/cheap-reliable-pir.html","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> Home Automation India </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="http://localhost:4000/Contributing.html" class="nav-list-link">Contributing</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/debugging/" class="nav-list-link">Debugging</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docker-and-self-hosted-apps/" class="nav-list-link">Docker</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docker-and-self-hosted-apps/heimdall/heimdall-custom-apps.html" class="nav-list-link">How to add custom apps to Heimdall - The proper method</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/esphome/" class="nav-list-link">ESPHome</a><ul class="nav-list "><li class="nav-list-item active"><a href="http://localhost:4000/esphome/cheap-reliable-pir.html" class="nav-list-link active">ESPHome PIR HC SR501</a></li><li class="nav-list-item "><a href="http://localhost:4000/esphome/Panasonic%20PIR/panasonic-pir.html" class="nav-list-link">ESPHome PaPIR</a></li><li class="nav-list-item "><a href="http://localhost:4000/esphome/esphome-power-monitoring-pzem004t/power-monitoring-pzem004t.html" class="nav-list-link">PZEM-004T Power Monitoring</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/homeassistant/" class="nav-list-link">HomeAssistant</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/homeassistant/remote-access/remote-access-free.html" class="nav-list-link">Remotely access your home assistant instance for free</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/nvr-and-surveillance/" class="nav-list-link">NVR</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/nvr-and-surveillance/zoneminder/zoneminder.html" class="nav-list-link">ZoneMinder</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/tracking/" class="nav-list-link">Tracking</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/tracking/vehicle-tracking-st901-traccar/vehicle-tracking-st901-traccar.html" class="nav-list-link">Why?</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Home Automation India" aria-label="Search Home Automation India" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/esphome/">ESPHome</a></li> <li class="breadcrumb-nav-list-item"><span>ESPHome PIR HC SR501</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h2 id="building-a-cheap-and-reliable-pir-system-with-esphome"> <a href="#building-a-cheap-and-reliable-pir-system-with-esphome" class="anchor-heading" aria-labelledby="building-a-cheap-and-reliable-pir-system-with-esphome"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Building a cheap and reliable PIR system with ESPHome </h2> <p>This guide explains how to build a powered WiFi PIR system in your house. If you are looking to build a battery powered system, then WiFi is probably the wrong choice and you should look elsewhere.</p> <p>Note: If you are using the slightly expensive PaPIR, you neither need the Power supply mod nor the noise mod.</p> <h3 id="components-needed"> <a href="#components-needed" class="anchor-heading" aria-labelledby="components-needed"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Components needed </h3> <ul> <li>Any ESP device</li> <li>PSU for powering up ESP</li> <li>PIR Sensor: HC SR501</li> <li>Ceramic capacitor: 47-220nF</li> </ul> <h3 id="steps"> <a href="#steps" class="anchor-heading" aria-labelledby="steps"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Steps </h3> <h4 id="power"> <a href="#power" class="anchor-heading" aria-labelledby="power"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Power </h4> <ul> <li>Wire your PSU to power the ESP device. If your power system is 5V, then you don’t need any additional steps since that’s the power expected from HC SR501.</li> <li>However, if you are using a 3.3V power supply, you need to bypass the onboard regulator on the sensor to directly take in 3.3V input.</li> </ul> <h4 id="reducing-noise"> <a href="#reducing-noise" class="anchor-heading" aria-labelledby="reducing-noise"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Reducing noise </h4> <ul> <li>HC SR501 is prone to noise and can behave erratically if the issues are not solved. Two major problems usually: ESP brings in WiFi noise and PSU noise.</li> <li>First solve the WiFi noise problem since that’s more common. Solder your ceramic capacitor on pins 12-13 of the IC on the PIR sensor.</li> <li>Test your setup after fixing the WiFi noise. If it is still erratic after adjusting sensitivity, then you should look at reducing the power supply noise by soldering an electrolytic capacitor on the PSU input to the sensor. Note: Multiple people have tried and failed using the PSU on Smitch bulbs, consider using an additional supply.</li> </ul> <h3 id="configuration-files"> <a href="#configuration-files" class="anchor-heading" aria-labelledby="configuration-files"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration files </h3> <p>ESPHome YAML</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>binary_sensor:
  - platform: gpio
    pin: 
      number: GPIO16
      inverted: false

    name: "PIR Sensor"
    device_class: motion
</code></pre></div></div> <p>Example HA automation (Generated using Blueprint)</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias: Motion-activated Light
description: ''
use_blueprint:
  path: homeassistant/motion_light.yaml
  input:
    motion_entity: binary_sensor.pir_sensor_hall
    light_target:
      device_id: 153528f8b7ba7faa426499554bf2f015
    no_motion_wait: 63
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
